<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Song Suggester · One‑Song Picks (YouTube)</title>
  <meta name="description" content="Pick your mood, genre, a similar singer, and a flavor vibe—get instant YouTube suggestions." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root { color-scheme: dark; }
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
    .glass { background: rgba(255,255,255,.06); backdrop-filter: blur(8px); border: 1px solid rgba(255,255,255,.12); }
    .chip { border: 1px solid rgba(255,255,255,.2); }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-800 text-slate-100">
  <main class="max-w-6xl mx-auto px-4 py-8">
    <header class="mb-8 flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4">
      <div>
        <h1 class="text-3xl sm:text-4xl font-extrabold tracking-tight">Song Suggester · Mood → Music</h1>
        <p class="text-slate-300 mt-2">Choose your <span class="font-semibold">mood</span>, <span class="font-semibold">genre</span>, name a <span class="font-semibold">similar singer</span>, and pick a <span class="font-semibold">food vibe</span>. Get a single song pick with a direct YouTube link.</p>
      </div>
      <a href="https://github.com" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-2xl px-4 py-2 glass hover:shadow-lg transition">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5"><path d="M12 2C6.48 2 2 6.48 2 12a10 10 0 006.84 9.5c.5.09.68-.22.68-.48 0-.24-.01-.87-.01-1.71-2.78.61-3.37-1.19-3.37-1.19-.45-1.15-1.11-1.46-1.11-1.46-.91-.62.07-.61.07-.61 1 .07 1.53 1.04 1.53 1.04.9 1.53 2.36 1.09 2.94.83.09-.66.35-1.09.64-1.34-2.22-.25-4.56-1.11-4.56-4.95 0-1.09.39-1.98 1.03-2.68-.1-.25-.45-1.27.1-2.65 0 0 .84-.27 2.75 1.02A9.56 9.56 0 0112 6.8c.85 0 1.72.12 2.53.34 1.91-1.29 2.75-1.02 2.75-1.02.55 1.38.2 2.4.1 2.65.64.7 1.03 1.59 1.03 2.68 0 3.85-2.34 4.7-4.57 4.95.36.31.68.92.68 1.86 0 1.34-.01 2.42-.01 2.75 0 .26.18.58.69.48A10 10 0 0022 12c0-5.52-4.48-10-10-10z"/></svg>
        <span class="text-sm">Source</span>
      </a>
    </header>

    <!-- FORM CARD -->
    <section class="glass rounded-3xl p-5 sm:p-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Mood -->
        <div>
          <label for="mood" class="block text-sm font-semibold mb-2">Mood</label>
          <select id="mood" class="w-full chip rounded-xl bg-slate-900/60 px-4 py-3">
            <option>Happy</option>
            <option>Sad</option>
            <option>Chill</option>
            <option>Energetic</option>
            <option>Focused</option>
            <option>Romantic</option>
          </select>
        </div>
        <!-- Genre -->
        <div>
          <label for="genre" class="block text-sm font-semibold mb-2">Genre</label>
          <select id="genre" class="w-full chip rounded-xl bg-slate-900/60 px-4 py-3">
            <option>Pop</option>
            <option>Rock</option>
            <option>Hip-Hop</option>
            <option>EDM</option>
            <option>Jazz</option>
            <option>Classical</option>
            <option>Indie</option>
            <option>K-Pop</option>
            <option>Lo‑Fi</option>
          </select>
        </div>
        <!-- Similar Singer -->
        <div>
          <label for="artist" class="block text-sm font-semibold mb-2">Similar singer (optional)</label>
          <input id="artist" type="text" placeholder="e.g., Taylor Swift, Drake, IU" class="w-full chip rounded-xl bg-slate-900/60 px-4 py-3" />
        </div>
        <!-- Food vibe -->
        <div>
          <label for="food" class="block text-sm font-semibold mb-2">Food vibe</label>
          <select id="food" class="w-full chip rounded-xl bg-slate-900/60 px-4 py-3">
            <option>Espresso</option>
            <option>Matcha</option>
            <option>Sushi</option>
            <option>Tacos</option>
            <option>Hotpot</option>
            <option>Bubble Tea</option>
            <option>Dark Chocolate</option>
            <option>Croissant</option>
            <option>BBQ</option>
            <option>Ramen</option>
          </select>
        </div>
      </div>

      <div class="mt-6 flex flex-wrap gap-3">
        <button id="suggestBtn" class="rounded-2xl px-5 py-3 bg-indigo-500 hover:bg-indigo-400 text-white font-semibold shadow">
          Get suggestions
        </button>
        <button id="openAllBtn" class="rounded-2xl px-5 py-3 bg-slate-700 hover:bg-slate-600 text-white font-semibold shadow disabled:opacity-40" disabled>
          Open all in new tabs
        </button>
        <button id="savePresetBtn" class="rounded-2xl px-5 py-3 bg-emerald-500 hover:bg-emerald-400 text-white font-semibold shadow">
          Save as preset
        </button>
        <input id="presetName" class="chip rounded-xl bg-slate-900/60 px-4 py-3" placeholder="Preset name (optional)" />
      </div>

      <!-- Why this match -->
      <div id="whyBox" class="mt-6 hidden rounded-2xl p-4 bg-slate-900/70 border border-slate-700"></div>
    </section>

    <!-- RESULT CARD (single) -->
    <section class="mt-8">
      <h2 class="text-xl font-bold mb-3">Your song</h2>
      <div id="resultOne" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
      <div id="alternatesWrap" class="mt-4 hidden">
        <h3 class="font-semibold mb-2">Alternates</h3>
        <div id="alternates" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>
      </div>
    </section>

    <!-- PRESETS -->
    <section class="mt-10">
      <div class="flex items-baseline justify-between mb-2">
        <h2 class="text-xl font-bold">Your presets</h2>
        <button id="clearPresetsBtn" class="text-sm text-rose-300 hover:text-rose-200">Clear all</button>
      </div>
      <div id="presets" class="flex flex-wrap gap-3"></div>
    </section>

    <footer class="mt-12 text-center text-xs text-slate-400">
      <p>Built for quick idea exploration. Picks a single track from a curated catalog and links directly to YouTube.</p>
    </footer>
  </main>

  <script>
    // --------- Data maps ---------
    const MOOD_KEYWORDS = {
      Happy: ["feel-good", "uplifting", "sunny vibes", "major key"],
      Sad: ["melancholic", "emotional", "ballad", "minor key"],
      Chill: ["chill", "laid-back", "lofi", "soft"],
      Energetic: ["high energy", "bangers", "party", "workout"],
      Focused: ["instrumental", "concentration", "ambient", "no lyrics"],
      Romantic: ["love song", "romantic", "slow dance", "tender"],
    };

    const GENRE_ALIASES = {
      Pop: ["pop", "top 40", "mainstream"],
      Rock: ["rock", "alternative", "indie rock"],
      "Hip-Hop": ["hip hop", "rap"],
      EDM: ["edm", "electronic", "house"],
      Jazz: ["jazz", "smooth jazz", "swing"],
      Classical: ["classical", "orchestral", "piano"],
      Indie: ["indie", "bedroom pop", "alt"],
      "K-Pop": ["kpop", "k-pop"],
      "Lo‑Fi": ["lofi", "lo-fi", "study"],
    };

    const FOOD_VIBES = {
      Espresso: ["fast", "intense", "sharp"],
      Matcha: ["calm", "green", "clean"],
      Sushi: ["minimal", "clean production", "fresh"],
      Tacos: ["spicy", "vibrant", "latin"],
      Hotpot: ["warm", "communal", "rich layers"],
      "Bubble Tea": ["sweet", "bouncy", "fun"],
      "Dark Chocolate": ["moody", "rich", "deep"],
      Croissant: ["buttery", "french", "light"],
      BBQ: ["smoky", "bold", "southern"],
      Ramen: ["comfort", "umami", "cozy"],
    };

    // --------- Utils ---------
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));
    const uid = () => Math.random().toString(36).slice(2, 9);
    const ytSearchUrl = (q) => `https://www.youtube.com/results?search_query=${encodeURIComponent(q)}`;

    function craftPrompts({ mood, genre, artist, food }) {
      const moodBits = (MOOD_KEYWORDS[mood] || []).slice(0, 2).join(" ");
      const genreBits = (GENRE_ALIASES[genre] || [genre]).slice(0, 2).join(" ");
      const foodBits = (FOOD_VIBES[food] || []).slice(0, 2).join(" ");

      const base = [mood, genre, moodBits, foodBits].filter(Boolean).join(" ");

      const withArtist = artist
        ? [
            `${artist} ${genre} ${moodBits}`,
            `${artist} ${mood} playlist`,
          ]
        : [];

      const mixes = [
        `${base} new songs 2024 2025`,
        `${base} underrated tracks`,
        `${base} playlist mix`,
        `${genre} ${mood} ${food} vibe`,
      ];

      const unique = Array.from(new Set([...withArtist, ...mixes])).filter(Boolean);
      return unique.slice(0, 6);
    }

    function explainChoice(mood, genre, food) {
      const moodWhy = {
        Happy: "Bright, upbeat progressions for a dopamine boost.",
        Sad: "Slower tempos and emotive vocals for reflection.",
        Chill: "Mellow textures and softer drums for relaxation.",
        Energetic: "High BPM, punchy drums, and anthem hooks for momentum.",
        Focused: "Minimal vocals and steady ambience for deep work.",
        Romantic: "Warm timbres and intimate vocals for a cozy feel.",
      };

      const foodWhy = {
        Espresso: "Sharper rhythms and tight arrangements — like a caffeine hit.",
        Matcha: "Clean, smooth mixes with gentle dynamics.",
        Sushi: "Minimalist production and crisp detail.",
        Tacos: "Colorful instrumentation with a lively kick.",
        Hotpot: "Layered textures that build warmth.",
        "Bubble Tea": "Playful beats and catchy hooks.",
        "Dark Chocolate": "Deep bass and moody harmonies.",
        Croissant: "Light, airy melodies with tasteful flourishes.",
        BBQ: "Bold grooves and smoky guitar/keys.",
        Ramen: "Comforting chords and cozy ambience.",
      };

      return `${moodWhy[mood] || "Tuning the vibe to your mood."} ${foodWhy[food] || "Adding a flavor-inspired tone."} Genre lens: ${genre}.`;
    }

    // --------- Presets (localStorage) ---------
    const PRESET_KEY = "song-suggester-presets-v1";
    const loadPresets = () => { try { return JSON.parse(localStorage.getItem(PRESET_KEY) || "[]"); } catch { return []; } };
    const savePresets = (list) => { try { localStorage.setItem(PRESET_KEY, JSON.stringify(list)); } catch {} };

    function renderPresets() {
      const holder = $("#presets");
      holder.innerHTML = "";
      const list = loadPresets();
      if (!list.length) {
        holder.innerHTML = '<p class="text-slate-400 text-sm">No presets yet. Configure your vibe and click “Save as preset”.</p>';
        return;
      }
      list.forEach(p => {
        const el = document.createElement("button");
        el.className = "chip rounded-2xl px-4 py-2 hover:bg-slate-800/60";
        el.title = `${p.mood} · ${p.genre} · ${p.food}${p.artist ? ` · like ${p.artist}`: ''}`;
        el.textContent = p.name || `${p.mood} · ${p.genre} · ${p.food}`;
        el.addEventListener("click", () => {
          $("#mood").value = p.mood; $("#genre").value = p.genre; $("#artist").value = p.artist; $("#food").value = p.food;
          $("#results").innerHTML = ""; $("#whyBox").classList.add("hidden");
        });
        holder.appendChild(el);
      });
    }

    function clearPresets() {
      localStorage.removeItem(PRESET_KEY); renderPresets();
    }

    // --------- Actions ---------
    function recommend() {
      const mood = $("#mood").value; const genre = $("#genre").value; const artist = $("#artist").value.trim(); const food = $("#food").value;
      const prompts = craftPrompts({ mood, genre, artist, food });
      const results = $("#results");
      results.innerHTML = "";

      const why = explainChoice(mood, genre, food);
      const whyBox = $("#whyBox");
      whyBox.textContent = why; whyBox.classList.remove("hidden");

      prompts.forEach((q, i) => {
        const card = document.createElement("article");
        card.className = "glass rounded-2xl p-4 flex flex-col gap-3";
        card.innerHTML = `
          <div class="flex items-start justify-between gap-3">
            <h3 class="font-semibold">Suggestion ${i + 1}</h3>
            <button class="text-xs text-slate-300 hover:text-white underline" data-copy>Copy query</button>
          </div>
          <p class="text-sm text-slate-300">${q}</p>
          <div class="flex gap-2 flex-wrap">
            <a class="rounded-xl px-3 py-2 bg-red-500 hover:bg-red-400 text-white text-sm font-semibold" href="${ytSearchUrl(q)}" target="_blank" rel="noopener">Open on YouTube</a>
            <a class="rounded-xl px-3 py-2 bg-slate-700 hover:bg-slate-600 text-white text-sm" href="https://www.google.com/search?q=${encodeURIComponent(q + ' site:youtube.com')}" target="_blank" rel="noopener">Google (YouTube only)</a>
          </div>`;
        results.appendChild(card);
        card.querySelector('[data-copy]').addEventListener('click', async () => {
          try { await navigator.clipboard.writeText(q); card.querySelector('[data-copy]').textContent = 'Copied!'; setTimeout(()=> card.querySelector('[data-copy]').textContent = 'Copy query', 1200); } catch {}
        });
      });

      $("#openAllBtn").disabled = prompts.length === 0;
      $("#openAllBtn").dataset.urls = JSON.stringify(prompts.map(ytSearchUrl));
    }

    function savePreset() {
      const name = $("#presetName").value.trim();
      const mood = $("#mood").value; const genre = $("#genre").value; const artist = $("#artist").value.trim(); const food = $("#food").value;
      const list = loadPresets();
      list.unshift({ id: uid(), name: name || `${mood} · ${genre} · ${food}`, mood, genre, artist, food });
      const uniqueByKey = [];
      const seen = new Set();
      for (const p of list) {
        const key = `${p.mood}|${p.genre}|${p.artist}|${p.food}|${p.name}`;
        if (!seen.has(key)) { seen.add(key); uniqueByKey.push(p); }
      }
      savePresets(uniqueByKey.slice(0, 16));
      $("#presetName").value = "";
      renderPresets();
    }

    function openAll() {
      try {
        const urls = JSON.parse($("#openAllBtn").dataset.urls || "[]");
        urls.forEach(u => window.open(u, "_blank", "noopener"));
      } catch {}
    }

    // --------- Bindings ---------
    $("#suggestBtn").addEventListener("click", recommend);
    $("#savePresetBtn").addEventListener("click", savePreset);
    $("#openAllBtn").addEventListener("click", openAll);
    $("#clearPresetsBtn").addEventListener("click", clearPresets);

    // First render
    renderPresets();
  </script>
</body>
</html>
